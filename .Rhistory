setwd("~/Desktop/tada-hoc")
#load packages
library(readr)
library(quanteda)
library(readtext)
library(tidyverse)
library(quanteda.textmodels)
#load data
Corp_HouseOfCommons_V2  <- readRDS("~/Desktop/FP_textasdata/Corp_HouseOfCommons_V2.rds")
#load data
Corp_HouseOfCommons_V2  <- readRDS("~/Desktop/tada-hoc/Corp_HouseOfCommons_V2.rds")
head(Corp_HouseOfCommons_V2)
#load and arragne dictionary
dict_img <- read_csv("immigration_500.csv")
dict_img <- dict_img %>%
subset(select = -c(`100.0`))
dict_img <- dict_img %>%
pivot_wider(names_from= needs, values_from = needs)
rownames(dict_img ) <- c("immigration")
#convert dictionary df to a list
dict_list <- lapply(split(dict_img, row.names(dict_img)), unlist)
#turn to dictionary
dict <- dictionary(dict_list)
names(Corp_HouseOfCommons_V2)
#subset to speeches from 2000
speeches <- Corp_HouseOfCommons_V2 %>%
select(!c(iso3country, party.facts.id, parliament)) %>%
filter(date>"1999-12-20") %>%
filter(agenda=c("refug","mig","immig","foreign"))
Corp_HouseOfCommons_V2[Corp_HouseOfCommons_V2$agenda %like% c("mig","immig", "refuge","foreign"),]
library(data.table)
Corp_HouseOfCommons_V2[Corp_HouseOfCommons_V2$agenda %like% c("mig","immig", "refuge","foreign"),]
Corp_HouseOfCommons_V2[Corp_HouseOfCommons_V2$agenda %like% "migr",]
#load data
Corp_HouseOfCommons_V2  <- readRDS("~/Desktop/tada-hoc/Corp_HouseOfCommons_V2.rds")
#subset to speeches from 2000
speeches <- Corp_HouseOfCommons_V2 %>%
select(!c(iso3country, party.facts.id, parliament)) %>%
filter(date>"1999-12-20")
#turn into corpus
speechcorp <- corpus(speeches)
#restrict to speeches with over 100 words
clean_corp <- corpus_subset(speechcorp, ntoken(speechcorp) > 100)
#subset to speeches from 2000
speeches <- Corp_HouseOfCommons_V2 %>%
select(!c(iso3country, party.facts.id, parliament)) %>%
filter(date>"2009-12-20")
View(speeches)
#turn into corpus
speechcorp <- corpus(speeches)
#dfm creates a document feature matrix
img_dfm <- dfm(speechcorp, dictionary = dict)
